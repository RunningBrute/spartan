{% extends "training/base.html" %}

{% block nav %}
<nav>
    <a href="{% url 'start_workout' %}">new workout</a>
    <a href="{% url 'upload_gpx' %}">upload gpx</a>
    <a href="{% url 'endomondo' %}">endomondo</a>
    <a href="{% url 'statistics' %}">statistics</a>
</nav>
{% endblock %}

{%block content%}

<h2>quick stats</h2>
<section>
    <dl><dt>total workouts</dt><dd>{{previous_workouts.count}}</dd></dl>
    <dl><dt>total reps</dt><dd>{{ total_reps }}</dd></dl>
    <dl><dt>total km</dt><dd>{{ total_km }}</dd></dl>
</section>

{% load training_format %}

{% for week in weeks %}
    <h2>{{ week.start_time.date }}  .. {{ week.end_time.date }}</h2>
    <section>
        {% if forloop.first %}
            {% for workout in not_started_workouts %}
                <a href="{% url 'workout' workout.id %}">
                    <dl>
                        <dt>{{ workout.type }}</dt><dd>not started</dd>
                    </dl>
                </a>
            {% endfor %}
        {% endif %}

        {% for workout in week.workouts reversed %}
            <a href="{% url 'workout' workout.id %}">
                <dl>
                    <dt>{{ workout.started|date:"l" }} {{ workout.type }}</dt>
                    <dd>
                        {{ workout.volume }}
                        <span class="note">
                            {% if workout.live %}live{% else %}{{ workout.duration|duration }}{% endif %}
                        </span>
                    </dd>
                </dl>
            </a>
        {% endfor %}
    </section>
{% endfor %}

{% endblock %}
